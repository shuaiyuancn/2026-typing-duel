services:
  web:
    build: .
    container_name: myapp_dev
    ports:
      - "0.0.0.0:5001:5001"
    volumes:
      - .:/app
      - /app/.venv
    environment:
      - UV_PROJECT_ENVIRONMENT=/app/.venv
      # DATABASE_URL is not used by the app, but kept as placeholder if needed later or removed.
      # - DATABASE_URL=${DATABASE_URL:-postgresql://postgres:postgres@db:5432/postgres}
      - REDIS_URL=redis://redis:6379/0
    depends_on:
      - redis
    command: sh -c "uv sync && uv run python main.py"

  redis:
    image: redis:alpine
    container_name: typing_duel_redis
    ports:
      - "6379:6379"

volumes:
  # postgres_data: # Not needed
